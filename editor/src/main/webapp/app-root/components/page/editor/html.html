<!DOCTYPE html>
<html
    data-sly-use.editorConfig='io.wcm.caconfig.editor.model.EditorConfiguration'
    data-sly-use.clientLib="/libs/granite/sightly/templates/clientlib.html"
    ng-app="io.wcm.caconfig.app">
  <head>
    <meta charset="UTF-8">
    <title ng-bind="title"></title>
    <meta data-sly-call="${clientLib.css @ categories='io.wcm.caconfig.editor'}" data-sly-unwrap></meta>
  </head>
  <body class="coral--light">
    <nav class="coral-Panel-header endor-BlackBar header-main">
      <a href="/" class="wcm-io-editor endor-Brand">
        <i class="wcm-io-editor endor-Brand-icon coral-Icon coral-Icon--adobeMarketingCloud coral-Icon--sizeM"></i>
      </a>
      <span class="wcm-io-editor endor-Brand" ng-bind="title">${'io.wcm.caconfig.editor.title' @ i18n}</span>
    </nav>
    <div class="caconfig-page-border">

      <ng-view></ng-view>

      <ng-include src="modalTemplates.addConfig"></ng-include>
      <ng-include src="modalTemplates.addCollectionItem"></ng-include>
      <ng-include src="modalTemplates.deleteConfig"></ng-include>
      <ng-include src="modalTemplates.error"></ng-include>

      <meta data-sly-call="${clientLib.js @ categories='io.wcm.caconfig.editor'}" data-sly-unwrap></meta>
      <script type="text/javascript">
        angular.module("io.wcm.caconfig.app")
          .run(function($rootScope) {
            var i18n = {
              title: "${'io.wcm.caconfig.editor.title' @ i18n, context='text'}",
              contextPath: "${'io.wcm.caconfig.editor.contextPath' @ i18n, context='text'}",
              button: {
                add: "${'io.wcm.caconfig.editor.button.add' @ i18n, context='text'}",
                addItem: "${'io.wcm.caconfig.editor.button.addItem' @ i18n, context='text'}",
                cancel: "${'io.wcm.caconfig.editor.button.cancel' @ i18n, context='text'}",
                deleteConfig: "${'io.wcm.caconfig.editor.button.deleteConfig' @ i18n, context='text'}",
                deleteCollection: "${'io.wcm.caconfig.editor.button.deleteCollection' @ i18n, context='text'}",
                deleteItem: "${'io.wcm.caconfig.editor.button.deleteItem' @ i18n, context='text'}",
                ok: "${'io.wcm.caconfig.editor.button.ok' @ i18n, context='text'}",
                save: "${'io.wcm.caconfig.editor.button.save' @ i18n, context='text'}"
              },
              config: {
                name: "${'io.wcm.caconfig.editor.config.name' @ i18n, context='text'}",
                property: "${'io.wcm.caconfig.editor.config.property' @ i18n, context='text'}",
                value: "${'io.wcm.caconfig.editor.config.value' @ i18n, context='text'}",
                inherited: "${'io.wcm.caconfig.editor.config.inherited' @ i18n, context='text'}",
                overridden: "${'io.wcm.caconfig.editor.config.overridden' @ i18n, context='text'}",
                description: "${'io.wcm.caconfig.editor.config.description' @ i18n, context='text'}"
              },
              modal: {
                addTitle: "${'io.wcm.caconfig.editor.modal.addTitle' @ i18n, context='text'}",
                close: "${'io.wcm.caconfig.editor.modal.close' @ i18n, context='text'}",
                deleteMessage: "${'io.wcm.caconfig.editor.modal.deleteMessage' @ i18n, context='text'}",
                deleteTitle: "${'io.wcm.caconfig.editor.modal.deleteTitle' @ i18n, context='text'}",
                errorMessage: "${'io.wcm.caconfig.editor.modal.errorMessage' @ i18n, context='text'}",
                tooltip: {
                  allowed: "${'io.wcm.caconfig.editor.modal.tooltip.allowed' @ i18n, context='text'}",
                  unique: "${'io.wcm.caconfig.editor.modal.tooltip.unique' @ i18n, context='text'}"
                }
              }
            };
            $rootScope.i18n = i18n;
          });

        angular.module("io.wcm.caconfig.editor")
          .config(["dataServiceProvider", function(dataServiceProvider) {
            var configNamesUrl = "${editorConfig.configNamesUrl @ context='uri'}";
            var configDataUrl = "${editorConfig.configDataUrl @ context='uri'}";
            var configPersistUrl = "${editorConfig.configPersistUrl @ context='uri'}";
            dataServiceProvider.setRestUrls({
              configNamesUrl: configNamesUrl,
              configDataUrl: configDataUrl,
              configPersistUrl: configPersistUrl
            });
          }]);
      </script>

    </div>
  </body>
</html>
